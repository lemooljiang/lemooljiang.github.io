(function(t){function e(e){for(var n,o,i=e[0],l=e[1],c=e[2],p=0,m=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([1,"chunk-vendors"]),r()})({0:function(t,e){},"034f":function(t,e,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"059c":function(t,e,r){},"0690":function(t,e,r){},"0bb2":function(t,e,r){"use strict";var n=r("6868"),a=r.n(n);a.a},1:function(t,e,r){t.exports=r("56d7")},10:function(t,e){},1027:function(t,e,r){"use strict";var n=r("f70e"),a=r.n(n);a.a},11:function(t,e){},"12b6":function(t,e,r){"use strict";var n=r("ef0f"),a=r.n(n);a.a},"14bc":function(t,e,r){"use strict";var n=r("3d2a"),a=r.n(n);a.a},"1b5e":function(t,e,r){},2:function(t,e){},"26a9":function(t,e,r){},2896:function(t,e,r){"use strict";var n=r("86c7"),a=r.n(n);a.a},"2b98":function(t,e,r){},"2fcb":function(t,e,r){"use strict";var n=r("865e"),a=r.n(n);a.a},3:function(t,e){},"316a":function(t,e,r){"use strict";var n=r("987c"),a=r.n(n);a.a},"3d2a":function(t,e,r){},"3d74":function(t,e,r){},"3e8f":function(t,e,r){},4:function(t,e){},"461e":function(t,e,r){"use strict";var n=r("46e7"),a=r.n(n);a.a},"46e7":function(t,e,r){},"49e3":function(t,e,r){"use strict";var n=r("fcc0"),a=r.n(n);a.a},5:function(t,e){},"53ab":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info",id:"navmanu"}},[n("b-navbar-brand",{on:{click:t.backtoindex}},[n("img",{staticClass:"d-inline-block align-top",attrs:{src:r("d7a1"),alt:"SteemJiang"}})]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{attrs:{to:"/"}},[t._v("主页")]),n("router-link",{attrs:{to:"/category"}},[t._v("专栏")]),n("router-link",{attrs:{to:"/feed"}},[t._v("关注")]),n("router-link",{attrs:{to:"/hot"}},[t._v("热门")]),n("router-link",{attrs:{to:"/search"}},[t._v("查询作者")]),n("router-link",{attrs:{to:"/collection"}},[t._v("收藏")]),n("router-link",{attrs:{to:"/autovote"}},[t._v("自动点赞")]),n("router-link",{attrs:{to:"/comments"}},[t._v("评论")]),n("router-link",{attrs:{to:"/reply"}},[t._v("回复")]),n("router-link",{attrs:{to:"/post"}},[t._v("发布")]),this.$store.state.username?n("div",[n("a",{attrs:{href:"#"}},[t._v("@"+t._s(this.$store.state.username))]),n("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("注销")])]):n("div",[n("a",{attrs:{href:"https://signup.steemit.com",target:"_blank"}},[t._v("注册")]),n("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)],1)],1)],1),n("router-view"),n("Footer")],1)},s=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"myfooter"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",[r("b-col",[r("router-link",{attrs:{to:"/about"}},[t._v("关于SteemJiang")])],1),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemitwallet.com"}},[t._v("网页钱包")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/lemooljiang/lemooljiang.github.io"}},[t._v("Github")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/steemit/steem-js/tree/master/doc#install"}},[t._v("开发手册")])])],1),r("b-row",[r("b-col",[r("router-link",{attrs:{to:"/newbie"}},[t._v("新手指南")])],1),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/aaroncox/vessel/releases"}},[t._v("桌面钱包")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/steem-driver/awesome-steem"}},[t._v("AwesomeSteem")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://smt.steem.com"}},[t._v("SMTs")])])],1),r("b-row",[r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemh.org"}},[t._v("Steem指南")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemd.com/@"+this.$store.state.username}},[t._v("区块数据")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemprojects.com"}},[t._v("SteemProjects")])]),r("b-col")],1)],1),r("p",{staticClass:"info"},[t._v("Copyright©2019 SteemJiang是一个定制且精简的Steem区块链自媒体 @lemooljiang创建 QQ:497867999")])],1)},i=[],l={name:"Footer"},c=l,u=(r("f8f0"),r("2877")),p=Object(u["a"])(c,o,i,!1,null,"11f0ea74",null),m=p.exports,d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"category"}},[r("h1",[t._v("专栏")]),r("div",{attrs:{id:"titlename"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 cate",attrs:{id:"inline-form-input-name",placeholder:"请输入专栏名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 cate",attrs:{id:"inline-form-input-name",placeholder:"请输入tag"},model:{value:t.tag,callback:function(e){t.tag=e},expression:"tag"}})],1),r("div",{staticClass:"catrbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.add}},[t._v("添加")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.save}},[t._v("保存")]),r("em",[t._v("(专栏名可以随意取，tag则必须为文章包含的tag!)")])],1),t._l(t.category,(function(e){return r("div",{staticClass:"zhuanlan"},[r("p",{staticClass:"title"},[t._v("专栏: "+t._s(e.name)+" tag: "+t._s(e.tag)+" "),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(r){return t.del(e.tag)}}},[t._v("删除")])],1),t._l(t.getCategory(e.tag),(function(e){return r("div",[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("p",{staticClass:"posttime"},[t._v(t._s(t._f("formatTime")(e.created)))]),t._v(" "+t._s(e.title))])],1)}))],2)}))],2)},h=[],f=(r("4de4"),r("c740"),r("caad"),r("a434"),r("b0c0"),r("2532"),{name:"Category",data:function(){return{newpost:[],name:"",tag:"",category:[{name:"轻量的博客",tag:"steemjiang"}]}},methods:{add:function(){var t={name:this.name,tag:this.tag};this.category.push(t),this.name=this.tag=""},save:function(){var t=JSON.stringify(this.category);localStorage.setItem("category",t)},del:function(t){this.category.splice(this.category.findIndex((function(e){return e.tag===t})),1)},getCategory:function(t){var e=this.$store.state.posts;return e.filter((function(e){var r=e.json_metadata,n=JSON.parse(r);if(n.tags.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},mounted:function(){null==localStorage.getItem("category")?this.category=[{name:"轻量的博客",tag:"steemjiang"},{name:"比特币",tag:"bitcoin"}]:this.category=JSON.parse(localStorage.getItem("category"))}}),g=f,v=(r("e1b2"),Object(u["a"])(g,d,h,!1,null,"c73a4868",null)),b=v.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"reply"},[r("h5",[t._v("评论")]),t._l(t.replies,(function(t){return r("div",[r("Replylist",{attrs:{parentmsg:t}})],1)}))],2)},_=[],k=(r("d3b7"),r("e25e"),r("25f0"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item"},[r("span",{staticClass:"child"},[r("span",{staticClass:"author"},[t._v("@"+t._s(t.parentmsg.author))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.parentmsg.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}})],1),t.parentmsg.author==this.$store.state.username?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit(t.parentmsg)}}},[t._v("编辑")]),t.editFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refresh(t.parentmsg)}}},[t._v("更新")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],1):r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.reply(t.parentmsg.author,t.parentmsg.permlink,t.parentmsg)}}},[t._v("回复")])],1),t.replyFlag?r("div",[r("div",{attrs:{id:"main2"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.replypost(t.parentmsg.author,t.parentmsg.permlink,t.parentmsg)}}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e(),t.parentmsg.child?r("ul",{staticClass:"child"},t._l(t.parentmsg.child,(function(t,e){return r("Replylist",{key:e,attrs:{parentmsg:t}})})),1):t._e()])},w=[],$=(r("ac1f"),r("1276"),{name:"Replylist",data:function(){return{text:"",replyFlag:!1,editFlag:!1,key:""}},methods:{reply:function(t,e,r){this.replyFlag=!0,0==r.children&&this.$set(r,"child",[])},replypost:function(t,e,r){this.replyFlag=!1;var n=this.$store.state.password,a=this.$store.state.username,s=this.getstr(),o="",i=this.text,l=["cn","steemjiang"],c={tags:l,app:"steemit/1.0",format:"markdown"},u={parent_author:t,parent_permlink:e,title:o,author:a,permlink:s,body:i,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(c)};r.child.push(u),this.postToSteem(n,t,e,a,s,o,i,c)},edit:function(t){this.editFlag=!0,this.text=t.body},refresh:function(t){this.editFlag=!1,this.$set(t,"body",this.text);var e=this.$store.state.password,r=this.$store.state.username,n=t.parent_author,a=t.parent_permlink,s=t.permlink,o=t.title,i=this.text,l=t.json_metadata;this.postToSteem(e,n,a,r,s,o,i,l);var c=this.$route.params.permlink,u=c+"length",p=parseInt(localStorage.getItem(u));p--,localStorage.setItem(u,p.toString())},clear:function(){this.replyFlag=!1,this.editFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},props:["parentmsg"]}),S=$,j=(r("c073"),Object(u["a"])(S,x,w,!1,null,"71f929ba",null)),O=j.exports,C={name:"Reply",data:function(){return{firstreplies:[],replies:[],temp:[],keys:[],res:[]}},methods:{getRepliesFromDB:function(){var t=this.$store.state.db,e=this.$store.state.username+"reply",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},filterRepliesDB:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=this.firstreplies;a.forEach((function(a){a.parent_author==t&a.parent_permlink==e&&(n.push(a),a.children>0&&r.filterRepliesDB(a.author,a.permlink,a.child=[]))})),this.replies=n},filterRepliesTemp:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this,a=n.res;a.forEach((function(a){a.parent_author==t&a.parent_permlink==e&&(r.push(a),a.children>0&&n.filterRepliesTemp(a.author,a.permlink,a.child=[]))})),n.temp=r},searchRepliyKeys:function(t){var e=this,r=this.$store.state.db,n=this.$store.state.username+"reply",a=r.transaction([n],"readwrite"),s=a.objectStore(n);return new Promise((function(r){s.openCursor().onsuccess=function(n){var a=n.target.result;a?(t.forEach((function(t){a.value.permlink==t.permlink&&e.keys.push(a.key)})),a.continue()):r(),s.openCursor().onerror=function(t){console.dir(t)}}}))},delreplies:function(){var t=this.keys,e=this.$store.state.db,r=this.$store.state.username+"reply",n=e.transaction([r],"readwrite"),a=n.objectStore(r);return new Promise((function(e){t.forEach((function(t){a.delete(t)})),e()}))},saveReplies:function(){var t=this.$store.state.db,e=this.$store.state.username+"reply",r=t.transaction([e],"readwrite");r.oncomplete=function(t){console.log("事务操作完成")},r.onerror=function(t){console.log(311,"事务操作出错"),console.dir(t)},r.onsuccess=function(t){console.log("事务操作成功")};for(var n=r.objectStore(e),a=this.res,s=0;s<a.length;s++)n.add(a[s])}},watch:{temp:function(){this.replies=this.temp}},mounted:function(){var t=this,e=this.$store.state.username,r=this.$route.params.permlink,n=r+"length";function a(t,e){return s.apply(this,arguments)}function s(){return s=Object(k["a"])(regeneratorRuntime.mark((function e(r,n){var s,o,i,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]?l[2]:[],e.next=3,t.steem.api.getContentRepliesAsync(r,n);case 3:return o=e.sent,i=[],o.forEach((function(t){s.push(t),t.children>0&&i.push(a(t.author,t.permlink,s))})),e.next=8,Promise.all(i);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}if(null==localStorage.getItem(n)){var o=function(){var s=Object(k["a"])(regeneratorRuntime.mark((function s(){var o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a(e,r);case 2:o=s.sent,t.res=o,t.filterRepliesTemp(e,r),i=o.length.toString(),localStorage.setItem(n,i),t.saveReplies();case 8:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();o()}else{var i=function(){var n=Object(k["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getRepliesFromDB();case 2:t.firstreplies=n.sent,t.filterRepliesDB(e,r);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var s=Object(k["a"])(regeneratorRuntime.mark((function s(){var o,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a(e,r);case 2:if(o=s.sent,i=parseInt(localStorage.getItem(n)),!(i<o.length)){s.next=13;break}return t.res=o,t.filterRepliesTemp(e,r),s.next=9,t.searchRepliyKeys(o);case 9:return s.next=11,t.delreplies();case 11:t.saveReplies(),localStorage.setItem(n,o.length.toString());case 13:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();setTimeout(i,200),setTimeout(l,300)}},components:{Replylist:O}},F=C,R=(r("838e"),Object(u["a"])(F,y,_,!1,null,"10244a47",null)),A=R.exports,P=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" 这是测试 ")])},T=[],D=(r("c975"),{name:"Test",data:function(){return{str:""}},mounted:function(){var t=["Banana","Orange","Apple","Mango","Banana","Orange","Apple"],e=t.indexOf("Apple22");console.log(123,e)}}),I=D,E=(r("461e"),Object(u["a"])(I,P,T,!1,null,"73b80d66",null)),L=E.exports,B={name:"App",data:function(){return{username:"",password:"",keywords:""}},methods:{backtoindex:function(){this.$router.push({path:"/"})},logout:function(){this.$store.commit("clearUser")}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{Footer:m,Category:b,Reply:A,Test:L},mounted:function(){if(null!=localStorage.getItem("autostart")){console.log(222,"开始点赞啦！");var t=JSON.parse(localStorage.getItem("authors"));this.getDataAndVote(t)}}},N=B,J=(r("034f"),Object(u["a"])(N,a,s,!1,null,null,null)),q=J.exports,H=r("8c4f"),K=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("h2",[t._v("用户登录")]),r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-name",placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-password",type:"password",placeholder:"请输入发贴密钥（posting key）"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.login}},[t._v("登录")])],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)])},M=[],U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loading"})},z=[],V={name:"Loading"},Q=V,G=(r("7f16"),Object(u["a"])(Q,U,z,!1,null,"38280d7f",null)),W=G.exports,X={name:"Login",data:function(){return{username:"",password:"",isLoading:!1}},methods:{login:function(){this.isLoading=!0;var t=this,e=this.username;this.steem.api.getAccountHistory(e,0,0,(function(e,r){console.log(333,e,r),0===r.length&&(t.isLoading=!1,alert("用户不存在！"))})),this.steem.api.getAccounts([t.username],(function(e,r){var n,a=r[0].posting.key_auths[0][0],s=t.password;try{n=t.steem.auth.wifIsValid(s,a)}catch(o){n="false"}!0===n?(t.isLoading=!1,t.$store.commit("saveUser",{username:t.username,password:s}),t.$router.push({path:"/"})):alert("错误！请检查用户名和发贴密钥！")}))}},components:{Loading:W}},Y=X,Z=(r("14bc"),Object(u["a"])(Y,K,M,!1,null,"4a1bf2fc",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"article"},[t._l(t.search(t.keywords).slice(0,30),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("p",{staticClass:"posttime"},[t._v(t._s(t._f("formatTime")(e.created)))]),t._v(" "+t._s(e.title))])],1)})),t._l(t.search(t.keywords).slice(30),(function(e){return t.postFlag?r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("p",{staticClass:"posttime"},[t._v(t._s(t._f("formatTime")(e.created)))]),t._v(" "+t._s(e.title))])],1):t._e()})),t.nextFlag?r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.getAll}},[t._v("查看全部")])],1):t._e()],2),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},rt=[],nt=(r("99af"),r("2909")),at={name:"Index",data:function(){return{keywords:"",postFlag:!1,nextFlag:!0,isLoading:!1}},methods:{getAll:function(){this.postFlag=!0,this.nextFlag=!1},getSteemPosts:function(t,e,r,n){var a=this;return new Promise((function(s,o){var i=(new Date).toISOString().split(".")[0];a.steem.api.getDiscussionsByAuthorBeforeDate(t,e,i,r,(function(i,l){if(l.length>1){var c=[];l.forEach((function(t){t.permlink!=e&&c.push(t)})),n=[].concat(Object(nt["a"])(n),c),a.getSteemPosts(t,l[l.length-1].permlink,r,n).then(s).catch(o)}else s(n)}))}))},savePosts:function(t,e){var r=this,n=this.$store.state.username,a=t.transaction([n],"readwrite");return new Promise((function(t){a.oncomplete=function(e){console.log("111, 事务操作完成"),t()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("222, 事务操作成功")};for(var s=a.objectStore(n),o=e.length-1;o>-1;o--)s.add(e[o]);var i=r.$store.state.username;localStorage.setItem(i,"steemjiang")}))},search:function(t){var e=this.$store.state.posts;return e.filter((function(e){if(e.title.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{Loading:W},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=21;break}if(null!=localStorage.getItem(t.$store.state.username)){e.next=17;break}return console.log(166,"第一次登录"),t.isLoading=!0,e.next=6,t.getSteemPosts(t.$store.state.username,null,100,[]);case 6:return r=e.sent,t.$store.commit("savePosts",r),e.next=10,t.initDatabase();case 10:return n=e.sent,t.$store.commit("saveDB",n),e.next=14,t.savePosts(n,r);case 14:t.isLoading=!1,e.next=19;break;case 17:if(0!=t.$store.state.posts){e.next=19;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var r,n,a,s,o,i,l,c,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initDatabase();case 2:return r=e.sent,t.$store.commit("saveDB",r),e.next=6,t.getAllPosts(r);case 6:n=e.sent,t.$store.commit("savePosts",n.reverse()),a=n[0].created,s=[],n.forEach((function(t){s.push(t.permlink)})),o=t.$store.state.username,i=(new Date).toISOString().split(".")[0],l=[],c=null;case 15:return e.next=18,t.steem.api.getDiscussionsByAuthorBeforeDateAsync(o,c,i,10);case 18:if(u=e.sent,!(a<u[0].created&&-1===s.indexOf(u[0].permlink))){e.next=27;break}if(u.forEach((function(t){t.permlink!==c&&-1===s.indexOf(t.permlink)&&l.push(t)})),c=u[u.length-1].permlink,!(a>u[u.length-1].created)){e.next=25;break}return console.log(233,"没有更新的文章"),e.abrupt("break",30);case 25:e.next=28;break;case 27:return e.abrupt("break",30);case 28:e.next=15;break;case 30:if(!(l.length>0)){e.next=38;break}return e.next=33,t.savePosts(r,l);case 33:return console.log(544,"添加新文章成功！"),e.next=36,t.getAllPosts(r);case 36:p=e.sent,t.$store.commit("savePosts",p.reverse());case 38:case"end":return e.stop()}}),e)}))(),"t0",19);case 19:e.next=22;break;case 21:t.$router.push({path:"/hot"});case 22:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}},st=at,ot=(r("6da8"),Object(u["a"])(st,et,rt,!1,null,"85afa1a0",null)),it=ot.exports,lt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{staticClass:"md",attrs:{value:t.post.body+"<br><br>"+t.tags+JSON.parse(t.post.json_metadata).tags.join("　"),subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),r("br"),this.$store.state.username?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit(t.post.permlink)}}},[t._v("编辑")]),r("b-button",{attrs:{variant:"outline-primary"}},[r("a",{attrs:{target:"_blank",href:"https://steemd.com/@"+this.$store.state.username+"/"+t.post.permlink}},[t._v("文章数据")])]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.del}},[t._v("删除")])],1):t._e(),r("br"),r("Reply")],1)},ct=[],ut={name:"Article",data:function(){return{post:{},db:{},key:"",replies:[],tags:"tags(标签):　"}},methods:{edit:function(t){this.$router.push({path:"/edit/"+t})},postData:function(t){this.$router.push({path:"https://steemd.com/@"+this.$store.state.username+"/"+t,target:"_blank"})},del:function(){var t=this.$store.state.db,e=this.$store.state.username,r=t.transaction([e],"readwrite"),n=r.objectStore(e);n.delete(this.key),this.$router.push("/")},searchPosts:function(t){var e=this,r=this.$route.params.permlink;t.forEach((function(t){t.permlink==r&&(e.post=t)}))},searchKey:function(){var t=this,e=this.$route.params.permlink,r=this.$store.state.db,n=this.$store.state.username,a=r.transaction([n],"readwrite"),s=a.objectStore(n);s.openCursor().onsuccess=function(r){var n=r.target.result;n&&(n.value.permlink==e&&(t.key=n.key),n.continue()),s.openCursor().onerror=function(t){console.dir(t)}}}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},components:{Reply:A},filters:{formatTime:function(t){return t.substring(0,10)}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=17;break}if(0==t.$store.state.posts){e.next=7;break}r=t.$store.state.posts,t.searchPosts(r),t.searchKey(),e.next=17;break;case 7:return e.next=9,t.initDatabase();case 9:return n=e.sent,t.$store.commit("saveDB",n),e.next=13,t.getAllPosts(n);case 13:a=e.sent,t.$store.commit("savePosts",a.reverse()),t.searchPosts(a),t.searchKey();case 17:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}},pt=ut,mt=(r("2896"),Object(u["a"])(pt,lt,ct,!1,null,"3d8c8d7b",null)),dt=mt.exports,ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"tags  (输入英文标签，以空格分隔)"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1)},ft=[],gt=(r("498a"),{name:"Post",data:function(){return{db:{},body:"",title:"",tags:""}},methods:{post:function(){var t=this.$store.state.password,e="",r=this.tags.trim().split(/\s+/)[0],n=this.$store.state.username,a=this.getstr(),s=this.title,o=this.body,i=this.tags.trim().split(/\s+/),l={tags:i,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var c={title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)},u=this,p=this.$store.state.db,m=this.$store.state.username;function d(){return new Promise((function(t){var e=p.transaction([m],"readwrite");e.oncomplete=function(t){console.log("事务操作完成")},e.onerror=function(t){console.log("事务操作出错"),console.dir(t)},e.onsuccess=function(t){console.log("事务操作成功")};var r=e.objectStore(m);r.add(c),t()}))}function h(){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return t.next=4,u.getAllPosts(p);case 4:e=t.sent,u.$store.commit("savePosts",e.reverse()),u.$router.push({path:"/article/"+a});case 7:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}h()},uploadimg:function(t,e){this.imgAdd(t,e)}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=10;break}if(0!=t.$store.state.posts){e.next=10;break}return e.next=4,t.initDatabase();case 4:return r=e.sent,t.$store.commit("saveDB",r),e.next=8,t.getAllPosts(r);case 8:n=e.sent,t.$store.commit("savePosts",n.reverse());case 10:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}}),vt=gt,bt=(r("eb00"),Object(u["a"])(vt,ht,ft,!1,null,"2797ead6",null)),yt=bt.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"tags  (输入英文标签，以空格分隔)"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1)},kt=[],xt=(r("a15b"),{name:"Edit",data:function(){return{db:{},posts:[],body:"",title:"",permlink:"",tags:"",key:""}},methods:{uploadimg:function(t,e){this.imgAdd(t,e)},searchKey:function(){var t=this,e=this.$route.params.permlink,r=this.$store.state.db,n=this.$store.state.username,a=r.transaction([n],"readwrite"),s=a.objectStore(n);s.openCursor().onsuccess=function(r){var n=r.target.result;n&&(n.value.permlink==e&&(t.key=n.key,t.body=n.value.body,t.title=n.value.title,t.permlink=e,t.tags=JSON.parse(n.value.json_metadata).tags.join(" ")),n.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},post:function(){var t=this.$store.state.password,e="",r=this.tags.trim().split(/\s+/)[0],n=this.$store.state.username,a=this.permlink,s=this.title,o=this.body,i=this.tags.trim().split(/\s+/),l={tags:i,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var c={id:this.key,title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)},u=this,p=this.$store.state.db,m=this.$store.state.username;function d(){return new Promise((function(t){var e=p.transaction([m],"readwrite");e.oncomplete=function(t){console.log("事务操作完成")},e.onerror=function(t){console.log("事务操作出错"),console.dir(t)},e.onsuccess=function(t){console.log("事务操作成功")};var r=e.objectStore(m);r.put(c),t()}))}function h(){return f.apply(this,arguments)}function f(){return f=Object(k["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return t.next=4,u.getAllPosts(p);case 4:e=t.sent,u.$store.commit("savePosts",e.reverse()),u.$router.push({path:"/article/"+a});case 7:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}h()}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=16;break}if(0!=t.$store.state.posts){e.next=14;break}return e.next=4,t.initDatabase();case 4:return r=e.sent,t.$store.commit("saveDB",r),e.next=8,t.getAllPosts(r);case 8:return n=e.sent,t.$store.commit("savePosts",n.reverse()),e.next=12,t.searchKey();case 12:e.next=16;break;case 14:return e.next=16,t.searchKey();case 16:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}}),wt=xt,$t=(r("49e3"),Object(u["a"])(wt,_t,kt,!1,null,"cfc5d0cc",null)),St=$t.exports,jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/feedarticle/@"+e.author+"/"+e.permlink}},[t._v(t._s(e.title)+" "),r("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))])])],1)})),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.getNext}},[t._v("查看更多")])],1)],2)},Ot=[],Ct={name:"Feed",data:function(){return{keywords:"",posts:[],author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.posts;return e.filter((function(e){if(e.title.includes(t))return e}))},getFeed:function(){var t=this,e={tag:this.$store.state.username,limit:20};this.steem.api.getDiscussionsByFeed(e,(function(e,r){t.posts=r,t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveFeed",r),t.isLoading=!1}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:this.$store.state.username,limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByFeed(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveFeed",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:W},mounted:function(){0!=this.$store.state.feed?(this.posts=this.$store.state.feed,this.isLoading=!1):this.getFeed()},filters:{formatTime:function(t){return t.substring(0,10)}}},Ft=Ct,Rt=(r("7560"),Object(u["a"])(Ft,jt,Ot,!1,null,"4c11439a",null)),At=Rt.exports,Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{attrs:{value:t.post.body+"<br><br>"+t.tags+JSON.parse(t.post.json_metadata).tags.join("　"),subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),r("br"),t.$store.state.username?r("span",{staticClass:"newreply"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.reply}},[t._v("回复")])],1):t._e(),t.flag?r("span",[t._v(" 已收藏 ")]):r("span",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addCollection}},[t._v("收藏")])],1),t.replyFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.replypost}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e(),r("OtherReply",{attrs:{otherreply:t.areply}})],1)},Tt=[],Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"reply"},[r("h5",[t._v("评论")]),t._l(t.replies,(function(t){return r("div",[r("OtherReplylist",{attrs:{parentmsg:t}})],1)}))],2)},It=[],Et=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item"},[r("span",{staticClass:"child"},[r("span",{staticClass:"author"},[t._v("@"+t._s(t.parentmsg.author))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.parentmsg.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}})],1),t.parentmsg.author==this.$store.state.username?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit(t.parentmsg)}}},[t._v("编辑")]),t.editFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refresh(t.parentmsg)}}},[t._v("更新")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],1):r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.reply(t.parentmsg.author,t.parentmsg.permlink,t.parentmsg)}}},[t._v("回复")])],1),t.replyFlag?r("div",[r("div",{attrs:{id:"main2"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.replypost(t.parentmsg.author,t.parentmsg.permlink,t.parentmsg)}}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e(),t.parentmsg.child?r("ul",{staticClass:"child"},t._l(t.parentmsg.child,(function(t,e){return r("OtherReplylist",{key:e,attrs:{parentmsg:t}})})),1):t._e()])},Lt=[],Bt={name:"OtherReplylist",data:function(){return{text:"",replyFlag:!1,editFlag:!1,permlink:"",key:""}},methods:{reply:function(t,e,r){this.replyFlag=!0,0==r.children&&this.$set(r,"child",[])},replypost:function(t,e,r){this.replyFlag=!1;var n=this.$store.state.password,a=this.$store.state.username,s=this.getstr(),o="",i=this.text,l=["cn","steemjiang"],c={tags:l,app:"steemit/1.0",format:"markdown"},u={parent_author:t,parent_permlink:e,title:o,author:a,permlink:s,body:i,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(c)};r.child.push(u),this.postToSteem(n,t,e,a,s,o,i,c)},edit:function(t){this.editFlag=!0,this.text=t.body},refresh:function(t){this.editFlag=!1,this.$set(t,"body",this.text);var e=this.$store.state.password,r=this.$store.state.username,n=t.parent_author,a=t.parent_permlink,s=t.permlink,o=t.title,i=this.text,l=t.json_metadata;this.postToSteem(e,n,a,r,s,o,i,l)},clear:function(){this.replyFlag=!1,this.editFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},props:["parentmsg"]},Nt=Bt,Jt=(r("a0da"),Object(u["a"])(Nt,Et,Lt,!1,null,"799a3292",null)),qt=Jt.exports,Ht={name:"OtherReply",data:function(){return{replies:[]}},methods:{delreplies:function(){var t=this,e=t.keys,r=t.$store.state.db,n=t.$store.state.username+"reply",a=r.transaction([n],"readwrite"),s=a.objectStore(n);return new Promise((function(t){e.forEach((function(t){s.delete(t)})),t()}))}},watch:{otherreply:function(){this.replies.push(this.otherreply)}},mounted:function(){var t=this,e=this.$route.params.author,r=this.$route.params.permlink;function n(t,e){return a.apply(this,arguments)}function a(){return a=Object(k["a"])(regeneratorRuntime.mark((function e(r,a){var s,o,i,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=l.length>2&&void 0!==l[2]?l[2]:[],e.next=3,t.steem.api.getContentRepliesAsync(r,a);case 3:return o=e.sent,i=[],o.forEach((function(t){s.push(t),t.children>0&&i.push(n(t.author,t.permlink,t.child=[]))})),e.next=8,Promise.all(i);case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}n(e,r).then((function(e){t.replies=e}))},props:["otherreply"],components:{OtherReplylist:qt}},Kt=Ht,Mt=(r("a4c8"),Object(u["a"])(Kt,Dt,It,!1,null,"4a5a9d63",null)),Ut=Mt.exports,zt={name:"FeedArticle",data:function(){return{db:{},post:{},data:"",flag:localStorage.getItem(this.$route.params.permlink),replyFlag:!1,text:"",areply:{},tags:"tags(标签):　"}},methods:{addCollection:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite");r.oncomplete=function(t){console.log("事务操作完成")},r.onerror=function(t){console.log("事务操作出错"),console.dir(t)},r.onsuccess=function(t){console.log("事务操作成功")};var n=r.objectStore(e),a=this.post;n.add(a);var s=this.$route.params.permlink;localStorage.setItem(s,"steemjiang"),this.flag=localStorage.getItem(this.$route.params.permlink)},reply:function(){this.replyFlag=!0},replypost:function(){this.replyFlag=!1;var t=this.$store.state.password,e=this.$route.params.author,r=this.$route.params.permlink,n=this.$store.state.username,a=this.getstr(),s="",o=this.text,i=["cn","steemjiang"],l={tags:i,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var c={parent_author:e,parent_permlink:r,title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)};this.areply=c,this.text=""},clear:function(){this.replyFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},watch:{flag:function(t){return t}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;if(0!=this.$store.state.feed){var e=this.$store.state.feed;e.forEach((function(e){e.permlink==t.$route.params.permlink&&(t.post=e)}))}else{var r=this;this.steem.api.getContent(this.$route.params.author,this.$route.params.permlink,(function(t,e){r.post=e}))}if(0==this.$store.state.posts){var n=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.initDatabase();case 2:return e=t.sent,a.$store.commit("saveDB",e),t.next=6,a.getAllPosts(e);case 6:r=t.sent,a.$store.commit("savePosts",r.reverse());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=this;n()}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{OtherReply:Ut}},Vt=zt,Qt=(r("838d"),Object(u["a"])(Vt,Pt,Tt,!1,null,"0bf570a8",null)),Gt=Qt.exports,Wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{attrs:{value:t.post.body+"<br><br>"+t.tags+JSON.parse(t.post.json_metadata).tags.join("　"),subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),r("br"),t.$store.state.username?r("span",{staticClass:"newreply"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.reply}},[t._v("回复")])],1):t._e(),t.flag?r("span",[t._v(" 已收藏 ")]):r("span",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addCollection}},[t._v("收藏")])],1),t.replyFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.replypost}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e(),r("OtherReply",{attrs:{otherreply:t.areply}})],1)},Xt=[],Yt={name:"HotArticle",data:function(){return{db:{},post:{},data:"",flag:localStorage.getItem(this.$route.params.permlink),replyFlag:!1,text:"",areply:{},tags:"tags(标签):　"}},methods:{addCollection:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite");r.oncomplete=function(t){console.log("事务操作完成")},r.onerror=function(t){console.log("事务操作出错"),console.dir(t)},r.onsuccess=function(t){console.log("事务操作成功")};var n=r.objectStore(e),a=this.post;n.add(a);var s=this.$route.params.permlink;localStorage.setItem(s,"steemjiang"),this.flag=localStorage.getItem(this.$route.params.permlink)},reply:function(){this.replyFlag=!0},replypost:function(){this.replyFlag=!1;var t=this.$store.state.password,e=this.$route.params.author,r=this.$route.params.permlink,n=this.$store.state.username,a=this.getstr(),s="",o=this.text,i=["cn","steemjiang"],l={tags:i,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var c={parent_author:e,parent_permlink:r,title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)};this.areply=c,this.text=""},clear:function(){this.replyFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},watch:{flag:function(t){return t}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;if(0!=this.$store.state.hot){var e=this.$store.state.hot;e.forEach((function(e){e.permlink==t.$route.params.permlink&&(t.post=e)}))}else{var r=this;this.steem.api.getContent(this.$route.params.author,this.$route.params.permlink,(function(t,e){r.post=e}))}if(0==this.$store.state.posts){var n=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.initDatabase();case 2:return e=t.sent,a.$store.commit("saveDB",e),t.next=6,a.getAllPosts(e);case 6:r=t.sent,a.$store.commit("savePosts",r.reverse());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=this;n()}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{OtherReply:Ut}},Zt=Yt,te=(r("887c"),Object(u["a"])(Zt,Wt,Xt,!1,null,"0602eea8",null)),ee=te.exports,re=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/hotarticle/@"+e.author+"/"+e.permlink}},[t._v(t._s(e.title)+" "),r("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))])])],1)})),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.getNext}},[t._v("查看更多")])],1)],2)},ne=[],ae={name:"Hot",data:function(){return{keywords:"",posts:[],author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.posts;return e.filter((function(e){if(e.title.includes(t))return e}))},getHot:function(){var t=this,e={tag:"cn",limit:20};this.steem.api.getDiscussionsByTrending(e,(function(e,r){t.posts=r,t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",r),t.isLoading=!1}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"cn",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:W},mounted:function(){0!=this.$store.state.hot?(this.posts=this.$store.state.hot,this.isLoading=!1):this.getHot()},filters:{formatTime:function(t){return t.substring(0,10)}}},se=ae,oe=(r("fc44"),Object(u["a"])(se,re,ne,!1,null,"209b3cb2",null)),ie=oe.exports,le=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-input-group",{staticClass:"mt-3",attrs:{prepend:"作者名"}},[r("b-form-input",{on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchauthor(e)}},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.searchauthor}},[t._v("搜索")])],1)],1),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"文章关键字"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1),r("div",{staticClass:"article"},t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/searcharticle/@"+e.author+"/"+e.permlink}},[r("p",{staticClass:"posttime"},[t._v(t._s(t._f("formatTime")(e.created)))]),t._v(" "+t._s(e.title))])],1)})),0)],1)},ce=[],ue={name:"Search",data:function(){return{keywords:"",author:"",posts:[],isLoading:!1}},methods:{searchauthor:function(){this.isLoading=!0;var t=this.author;this.steem.api.getAccountHistory(t,0,0,(function(t,e){0===e.length&&alert("用户不存在！")}));var e=this;function r(){return n.apply(this,arguments)}function n(){return n=Object(k["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getSteemPosts(t,null,100,[]);case 2:n=r.sent,e.posts=n,e.$store.commit("saveSearchPosts",n),e.isLoading=!1;case 6:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},getSteemPosts:function(t,e,r,n){var a=this;return new Promise((function(s,o){var i=(new Date).toISOString().split(".")[0];a.steem.api.getDiscussionsByAuthorBeforeDate(t,e,i,r,(function(i,l){if(l.length>1){var c=[];l.forEach((function(t){t.permlink!=e&&c.push(t)})),n=[].concat(Object(nt["a"])(n),c),a.getSteemPosts(t,l[l.length-1].permlink,r,n).then(s).catch(o)}else s(n)}))}))},search:function(t){var e=this.posts;return e.filter((function(e){if(e.title.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{Loading:W},mounted:function(){}},pe=ue,me=(r("0bb2"),Object(u["a"])(pe,le,ce,!1,null,"c99788d2",null)),de=me.exports,he=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"article"},t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/collectionarticle/@"+e.author+"/"+e.permlink}},[t._v(t._s(e.title)+" "),r("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))])])],1)})),0)],1)},fe=[],ge={name:"Collection",data:function(){return{keywords:""}},methods:{search:function(t){var e=this.$store.state.collections;return e.filter((function(e){if(e.title.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},mounted:function(){var t=this;if(0==this.$store.state.posts){var e=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initDatabase();case 2:return r=e.sent,t.$store.commit("saveDB",r),e.next=6,t.getAllPosts(r);case 6:return n=e.sent,t.$store.commit("savePosts",n.reverse()),e.next=10,t.getCollections(r);case 10:a=e.sent,t.$store.commit("saveCollections",a.reverse());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(455,"db is null"),e()}else{var r=function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.db,e.next=3,t.getCollections(r);case 3:n=e.sent,t.$store.commit("saveCollections",n.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}}},ve=ge,be=(r("afc0"),Object(u["a"])(ve,he,fe,!1,null,"7c5b19c8",null)),ye=be.exports,_e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{staticClass:"md",attrs:{value:t.post.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),this.$store.state.username?r("div",[r("b-button",{staticClass:"del",attrs:{variant:"outline-primary"},on:{click:t.del}},[t._v("取消收藏")])],1):t._e(),r("br")],1)},ke=[],xe={name:"CollectionArticle",data:function(){return{post:{},key:""}},methods:{searchKey:function(){var t=this,e=this.$route.params.permlink,r=this.$store.state.db,n=this.$store.state.username+"collection",a=r.transaction([n],"readwrite"),s=a.objectStore(n);s.openCursor().onsuccess=function(r){var n=r.target.result;n&&(n.value.permlink==e&&(t.key=n.key),n.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},del:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite"),n=r.objectStore(e);n.delete(this.key);var a=this.$route.params.permlink;localStorage.removeItem(a),this.$router.push("/collection")},searchPosts:function(t){var e=this,r=this.$route.params.permlink;t.forEach((function(t){t.permlink==r&&(e.post=t)}))}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(k["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.$store.state.collections){e.next=6;break}r=t.$store.state.collections,t.searchPosts(r),t.searchKey(),e.next=21;break;case 6:return console.log(99,"fresh"),e.next=9,t.initDatabase();case 9:return n=e.sent,t.$store.commit("saveDB",n),e.next=13,t.getAllPosts(n);case 13:return a=e.sent,t.$store.commit("savePosts",a.reverse()),e.next=17,t.getCollections(n);case 17:s=e.sent,t.$store.commit("saveCollections",s.reverse()),t.searchPosts(s),t.searchKey();case 21:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()},filters:{formatTime:function(t){return t.substring(0,10)}}},we=xe,$e=(r("ea24"),Object(u["a"])(we,_e,ke,!1,null,"7ddcc267",null)),Se=$e.exports,je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{attrs:{value:t.post.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),r("br"),this.$store.state.username?r("span",{staticClass:"newreply"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.reply}},[t._v("回复")])],1):t._e(),t.flag?r("span",[t._v(" 已收藏 ")]):r("span",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addCollection}},[t._v("收藏")])],1),t.replyFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.replypost}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e(),r("OtherReply",{attrs:{otherreply:t.areply}})],1)},Oe=[],Ce={name:"SearchArticle",data:function(){return{db:{},post:{},data:"",flag:localStorage.getItem(this.$route.params.permlink),replyFlag:!1,text:"",areply:{}}},methods:{addCollection:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite");r.oncomplete=function(t){console.log("事务操作完成")},r.onerror=function(t){console.log("事务操作出错"),console.dir(t)},r.onsuccess=function(t){console.log("事务操作成功")};var n=r.objectStore(e),a=this.post;n.add(a);var s=this.$route.params.permlink;localStorage.setItem(s,"steemjiang"),this.flag=localStorage.getItem(this.$route.params.permlink)},reply:function(){this.replyFlag=!0},replypost:function(){this.replyFlag=!1;var t=this.$store.state.password,e=this.$route.params.author,r=this.$route.params.permlink,n=this.$store.state.username,a=this.getstr(),s="",o=this.text,i=["cn","steemjiang"],l={tags:i,app:"steemit/1.0",format:"markdown"};this.steem.broadcast.comment(t,e,r,n,a,s,o,l,(function(t,e){console.log(1234,t,e)}));var c={parent_author:e,parent_permlink:r,title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)};this.areply=c,this.text=""},clear:function(){this.replyFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},watch:{flag:function(t){return t}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;if(0!=this.$store.state.searchPosts){var e=this.$store.state.searchPosts;e.forEach((function(e){e.permlink==t.$route.params.permlink&&(t.post=e)}))}else{var r=this;this.steem.api.getContent(this.$route.params.author,this.$route.params.permlink,(function(t,e){r.post=e}))}if(0==this.$store.state.posts){var n=function(){var t=Object(k["a"])(regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.initDatabase();case 2:return e=t.sent,a.$store.commit("saveDB",e),t.next=6,a.getAllPosts(e);case 6:r=t.sent,a.$store.commit("savePosts",r.reverse());case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=this;n()}},filters:{formatTime:function(t){return t.substring(0,10)}},components:{OtherReply:Ut}},Fe=Ce,Re=(r("feb9"),Object(u["a"])(Fe,je,Oe,!1,null,"4b545011",null)),Ae=Re.exports,Pe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"autovote"}},[r("h1",[t._v("点赞设置")]),r("div",{attrs:{id:"titlename"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 cate",attrs:{id:"inline-form-input-name",placeholder:"请输入作者名"},model:{value:t.author,callback:function(e){t.author=e},expression:"author"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 cate",attrs:{id:"inline-form-input-name",placeholder:"请输入点赞比重：0~100"},model:{value:t.weight,callback:function(e){t.weight=e},expression:"weight"}})],1),r("div",{staticClass:"addbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.add}},[t._v("添加")])],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1),t._l(t.authors,(function(e){return r("div",{staticClass:"votelist"},[r("p",{staticClass:"author"},[t._v("作者: "+t._s(e.author)+" 点赞比重: "+t._s(e.weight)+" % "),r("b-button",{attrs:{variant:"outline-primary",id:"del"},on:{click:function(r){return t.del(e.author)}}},[t._v("删除")])],1)])})),r("div",{staticClass:"addbtn"},[t.autoFlag?r("span",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.saveAndStart}},[t._v("保存并开始")])],1):r("span",{staticStyle:{color:"#da741b"}},[t._v(" 已开始自动点赞...... "),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.stop}},[t._v("停止")])],1)])],2)},Te=[],De={name:"AutoVote",data:function(){return{newpost:[],author:"",weight:"",autoFlag:!0,isLoading:!1,authors:[{author:"lemooljiang",weight:100}]}},methods:{add:function(){this.autoFlag=!0,this.isLoading=!0;var t=this,e={author:this.author,weight:this.weight},r=this.author;this.steem.api.getAccountHistory(r,0,0,(function(r,n){0===n.length?(t.isLoading=!1,alert("此作者不存在！")):(t.isLoading=!1,t.authors.push(e),t.author=t.weight="")}))},saveAndStart:function(){this.autoFlag=!1;var t=JSON.stringify(this.authors);localStorage.setItem("authors",t),localStorage.setItem("autostart","SteemJiang"),this.$router.go(0)},stop:function(){this.autoFlag=!0,localStorage.removeItem("autostart"),this.$router.go(0)},del:function(t){this.autoFlag=!0,this.authors.splice(this.authors.findIndex((function(e){return e.author===t})),1)}},components:{Loading:W},mounted:function(){null==localStorage.getItem("authors")?this.authors=[{author:"lemooljiang",weight:100}]:this.authors=JSON.parse(localStorage.getItem("authors")),null!=localStorage.getItem("autostart")&&(this.autoFlag=!1)}},Ie=De,Ee=(r("2fcb"),Object(u["a"])(Ie,Pe,Te,!1,null,"b321b6a6",null)),Le=Ee.exports,Be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"article"},[t._l(t.repliesreverse.slice(0,30),(function(e){return r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[t._v("@"+t._s(e[1].op[1].author)+" "+t._s(t._f("formatTime")(e[1].timestamp)))]),r("br"),r("router-link",{attrs:{to:"/replydetail/@"+e[1].op[1].parent_author+"/"+e[1].op[1].parent_permlink+"/@"+e[1].op[1].author+"/"+e[1].op[1].permlink}},[r("mavon-editor",{attrs:{id:"replymd",value:e[1].op[1].body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}})],1)],1)})),t._l(t.repliesreverse.slice(30),(function(e){return t.replyFlag?r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[t._v("@"+t._s(e[1].op[1].author)+" "+t._s(t._f("formatTime")(e[1].timestamp)))]),r("br"),r("router-link",{attrs:{to:"/replydetail/@"+e[1].op[1].parent_author+"/"+e[1].op[1].parent_permlink+"/@"+e[1].op[1].author+"/"+e[1].op[1].permlink}},[r("mavon-editor",{attrs:{id:"replymd2",value:e[1].op[1].body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}})],1)],1):t._e()})),t.nextFlag?r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.getAll}},[t._v("查看全部")])],1):t._e()],2),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},Ne=[],Je={name:"ReplyToAuthor",data:function(){return{replies:[],replyFlag:!1,editFlag:!1,nextFlag:!0,isLoading:!1}},methods:{getAll:function(){this.replyFlag=!0,this.nextFlag=!1},saveReplies:function(t,e){var r=this,n=this.$store.state.username+"replytoauthor",a=t.transaction([n],"readwrite");return new Promise((function(t){a.oncomplete=function(e){console.log("123, 事务操作完成"),t()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("222, 事务操作成功")};for(var s=a.objectStore(n),o=e.length-1;o>-1;o--)s.add(e[o]),console.log(256,"添加成功");var i=r.$store.state.username+"replytoauthor";localStorage.setItem(i,"steemjiang")}))}},filters:{formatTime:function(t){return t.substring(0,10)}},computed:{repliesreverse:function(){return this.$store.state.repliestoauthor},prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},components:{Loading:W},mounted:function(){var t=this,e=this.$store.state.username,r=this.$store.state.username+"replytoauthor";function n(t,e){return a.apply(this,arguments)}function a(){return a=Object(k["a"])(regeneratorRuntime.mark((function e(r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],e.next=3,t.steem.api.getAccountHistoryAsync(r,-1,n);case 3:return s=e.sent,s.forEach((function(t){"comment"==t[1].op[0]&t[1].op[1].parent_author==r&&a.push(t)})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}function s(){return o.apply(this,arguments)}function o(){return o=Object(k["a"])(regeneratorRuntime.mark((function a(){var s,o,i,l,c,u,p,m,d,h,f,g,v,b,y;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.$store.state.username){a.next=66;break}if(null!=localStorage.getItem(r)){a.next=15;break}return t.isLoading=!0,a.next=5,n(e,3e3);case 5:return s=a.sent,console.log(588,s),t.$store.commit("saveRepliesToAuthor",s.reverse()),o=t.$store.state.db,a.next=11,t.saveReplies(o,s);case 11:t.isLoading=!1,console.log("评论存入数据库成功！"),a.next=66;break;case 15:if(0!=t.$store.state.posts){a.next=45;break}return console.log("345，刷新或数据库没开"),a.next=19,t.initDatabase();case 19:return i=a.sent,t.$store.commit("saveDB",i),a.next=23,t.getAllPosts(i);case 23:return l=a.sent,t.$store.commit("savePosts",l.reverse()),a.next=27,t.getRepliesToAuthor(i);case 27:return c=a.sent,t.$store.commit("saveRepliesToAuthor",c.reverse()),u=c[0][1].block,a.next=32,n(e,500);case 32:if(p=a.sent,m=[],p.forEach((function(t){u<t[1].block&&(console.log(22,"有新评论"),m.push(t))})),!(m.length>0)){a.next=43;break}return a.next=38,t.saveReplies(i,m.reverse());case 38:return console.log(566,"添加新评论成功！"),a.next=41,t.getRepliesToAuthor(i);case 41:d=a.sent,t.$store.commit("saveRepliesToAuthor",d.reverse());case 43:a.next=66;break;case 45:if(0!=t.$store.state.repliestoauthor){a.next=66;break}return console.log("444，获得数据库并读取评论"),h=t.$store.state.db,a.next=50,t.getRepliesToAuthor(h);case 50:return f=a.sent,t.$store.commit("saveRepliesToAuthor",f.reverse()),g=f[0][1].block,a.next=55,n(e,500);case 55:if(v=a.sent,b=[],v.forEach((function(t){g<t[1].block&&(console.log(33,"有新评论"),b.push(t))})),!(b.length>0)){a.next=66;break}return a.next=61,t.saveReplies(h,b.reverse());case 61:return console.log(577,"添加新评论成功！"),a.next=64,t.getRepliesToAuthor(h);case 64:y=a.sent,t.$store.commit("saveRepliesToAuthor",y.reverse());case 66:case"end":return a.stop()}}),a)}))),o.apply(this,arguments)}s()}},qe=Je,He=(r("660e"),Object(u["a"])(qe,Be,Ne,!1,null,"13f3404a",null)),Ke=He.exports,Me=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("router-link",{attrs:{to:"/otherarticle/@"+t.onereply.root_author+"/"+t.onereply.root_permlink}},[r("h1",[t._v("原文："+t._s(t.onereply.root_title)+" ")])]),t._v(" 父评论： "),r("p",[t._v("@"+t._s(t.parentreply.author)+" "+t._s(t._f("formatTime")(t.parentreply.created)))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.parentreply.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),r("div",{staticClass:"child"},[r("p",[t._v("@"+t._s(t.onereply.author)+" "+t._s(t._f("formatTime")(t.onereply.created)))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.onereply.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),this.$store.state.username?r("span",{staticClass:"newreply"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.reply}},[t._v("回复")])],1):t._e(),t.replyFlag?r("div",[r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.replypost}},[t._v("提交")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],1),t.newreplyFlag?r("div",{staticClass:"secchild"},[r("p",[t._v("@"+t._s(t.newreply.author)+" "+t._s(t._f("formatTime")(t.newreply.created)))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.newreply.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit()}}},[t._v("编辑")]),t.editFlag?r("div",[r("div",{attrs:{id:"main2"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.imgAdd},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refresh(t.newreply)}}},[t._v("更新")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],1):t._e()],1)},Ue=[],ze={name:"ReplyDetail",data:function(){return{db:{},data:"",flag:localStorage.getItem(this.$route.params.permlink),replyFlag:!1,editFlag:!1,text:"",areply:{},onereply:{},parentreply:{},newreply:{},newreplyFlag:!1,tags:"tags(标签):　"}},methods:{reply:function(){this.replyFlag=!0},replypost:function(){this.replyFlag=!1;var t=this.$store.state.password,e=this.$route.params.author,r=this.$route.params.permlink,n=this.$store.state.username,a=this.getstr(),s="",o=this.text,i=["cn","steemjiang"],l={tags:i,app:"steemit/1.0",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var c={parent_author:e,parent_permlink:r,title:s,author:n,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)};this.newreply=c,this.newreplyFlag=!0,this.text=""},edit:function(){this.editFlag=!0,this.text=this.newreply.body},refresh:function(t){this.editFlag=!1,this.$set(t,"body",this.text);var e=this.$store.state.password,r=this.$store.state.username,n=t.parent_author,a=t.parent_permlink,s=t.permlink,o=t.title,i=this.text,l=t.json_metadata;this.postToSteem(e,n,a,r,s,o,i,l)},clear:function(){this.replyFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},watch:{flag:function(t){return t}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;this.steem.api.getContent(this.$route.params.parent_author,this.$route.params.parent_permlink,(function(e,r){t.parentreply=r})),this.steem.api.getContent(this.$route.params.author,this.$route.params.permlink,(function(e,r){t.onereply=r}))},filters:{formatTime:function(t){return t.substring(0,10)}},components:{OtherReply:Ut}},Ve=ze,Qe=(r("316a"),Object(u["a"])(Ve,Me,Ue,!1,null,"9225b5c4",null)),Ge=Qe.exports,We=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"article"},[t._l(t.comments,(function(e){return r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))]),r("router-link",{attrs:{to:"/commentdetail/@"+e.parent_author+"/"+e.parent_permlink+"/@"+e.author+"/"+e.permlink}},[r("mavon-editor",{attrs:{id:"replymd",value:e.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}})],1)],1)})),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.getNext}},[t._v("查看更多")])],1)],2)])},Xe=[],Ye={name:"Comments",data:function(){return{comments:[],permlink:"",isLoading:!0}},methods:{getComments:function(){var t=this,e=this.$store.state.username,r={limit:30,start_author:e,start_permlink:""};this.steem.api.getDiscussionsByComments(r,(function(e,r){t.comments=r,t.permlink=r[r.length-1].permlink,t.isLoading=!1}))},getNext:function(){var t=this;t.isLoading=!0;var e=this.$store.state.username;t.isLoading=!0;var r={limit:30,start_author:e,start_permlink:this.permlink};this.steem.api.getDiscussionsByComments(r,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.comments.push(e)})),t.permlink=r[r.length-1].permlink,t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},filters:{formatTime:function(t){return t.substring(0,10)}},computed:{repliesreverse:function(){return this.$store.state.repliestoauthor},prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},components:{Loading:W},mounted:function(){this.getComments()}},Ze=Ye,tr=(r("12b6"),Object(u["a"])(Ze,We,Xe,!1,null,"cfc7dcde",null)),er=tr.exports,rr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("router-link",{attrs:{to:"/otherarticle/@"+t.onereply.root_author+"/"+t.onereply.root_permlink}},[r("h1",[t._v("原文："+t._s(t.onereply.root_title)+" ")])]),t._v(" 父评论： "),r("p",[t._v("@"+t._s(t.parentreply.author)+" "+t._s(t._f("formatTime")(t.parentreply.created)))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.parentreply.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),r("div",{staticClass:"child"},[r("p",[t._v("@"+t._s(t.onereply.author)+" "+t._s(t._f("formatTime")(t.onereply.created)))]),r("mavon-editor",{staticClass:"replymd",attrs:{value:t.onereply.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,boxShadow:!1,scrollStyle:t.prop.scrollStyle}}),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.edit()}}},[t._v("编辑")]),t.editFlag?r("div",[r("div",{attrs:{id:"main2"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refresh(t.onereply)}}},[t._v("更新")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.clear}},[t._v("取消")])],1):t._e()],1)],1)},nr=[],ar={name:"CommentDetail",data:function(){return{db:{},data:"",flag:localStorage.getItem(this.$route.params.permlink),replyFlag:!1,editFlag:!1,text:"",onereply:{},parentreply:{}}},methods:{edit:function(){this.editFlag=!0,this.text=this.onereply.body},refresh:function(t){this.editFlag=!1,this.$set(t,"body",this.text);var e=this.$store.state.password,r=this.$store.state.username,n=t.parent_author,a=t.parent_permlink,s=t.permlink,o=t.title,i=this.text,l=t.json_metadata;this.postToSteem(e,n,a,r,s,o,i,l)},clear:function(){this.editFlag=!1,this.text=""},uploadimg:function(t,e){this.imgAdd(t,e)}},watch:{flag:function(t){return t}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;this.steem.api.getContent(this.$route.params.parent_author,this.$route.params.parent_permlink,(function(e,r){t.parentreply=r})),this.steem.api.getContent(this.$route.params.author,this.$route.params.permlink,(function(e,r){t.onereply=r}))},filters:{formatTime:function(t){return t.substring(0,10)}},components:{OtherReply:Ut}},sr=ar,or=(r("83cf"),Object(u["a"])(sr,rr,nr,!1,null,"b3079db4",null)),ir=or.exports,lr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},cr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("关于SteemJiang")]),r("img",{attrs:{src:"https://i.loli.net/2019/11/17/7P943k5rebDV1zX.jpg",alt:""}}),r("br"),r("br"),t._v(" SteemJiang是一个定制且精简的Steem区块链自媒体，@lemooljiang创建。它做了很多的前端优化，使用起来相当丝滑！"),r("br"),r("br"),t._v(" SteemJiang是一个纯粹的前端应用！ 它和比特币的离线钱包类似，可以很方便地在本地构建，无需服务器。"),r("br"),r("br"),t._v(" 当然，为了方便大家使用，我把它上传到github page中，大家可以直接访问：https://lemooljiang.github.io"),r("br"),r("br"),r("h4",[t._v("本地构建说明")]),t._v(" 本地环境：Apache 或 Nginx"),r("br"),t._v(" 仓库地址： https://github.com/lemooljiang/lemooljiang.github.io"),r("br"),t._v(" 将仓库中的“index.html” 和 “static” 下载到本地，放进Apache 或 Nginx的根目录即可，http://localhost"),r("br"),r("br")])}],ur={name:"About",data:function(){return{}},mounted:function(){}},pr=ur,mr=(r("914a"),Object(u["a"])(pr,lr,cr,!1,null,"21f1e02c",null)),dr=mr.exports,hr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("新手生存指南")]),t._m(0),r("div",{staticClass:"newtext"},[r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3f5j36-steem"}},[t._v("1、steem介绍")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4xxuhj"}},[t._v("2、翻墙注册（更新版）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4kkmhd"}},[t._v("3、发贴赚钱")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4mddsq"}},[t._v("4、图文编辑三板斧（更新版）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3xqvw9"}},[t._v("5、工具红宝书")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/supload"}},[t._v("6、新图床supload，顺便赚点比特币")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/p"}},[t._v("7、P图神技")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3xem6o"}},[t._v("8、快速查询及归类")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/3s29oy"}},[t._v("9、勤于打扫，与垃圾号绝交")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/6hgzux"}},[t._v("10、一分钟注册新帐户（需要付费）")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/markdown-steemit"}},[t._v("11、Markdown语法规范")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/4rxtdx"}},[t._v("12、好玩的表情包和字体图标")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/km1n4"}},[t._v("13、极速提现")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/6jrje-steemit"}},[t._v("14、steemit上的长跑")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/2dfqrq"}},[t._v("15、密码即一切")]),r("br"),r("router-link",{attrs:{to:"/searcharticle/@lemooljiang/steem-dapp"}},[t._v("16、基于steem的应用DAPP")]),r("br")],1)])},fr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticStyle:{"margin-left":"15%"}},[r("img",{attrs:{src:"https://i.loli.net/2019/11/24/bsO5WDuaBonL7Uv.jpg",alt:"steem",id:"newbie"}})])}],gr={name:"Newbie",data:function(){return{}},mounted:function(){}},vr=gr,br=(r("1027"),Object(u["a"])(vr,hr,fr,!1,null,"5f1effec",null)),yr=br.exports;n["default"].use(H["a"]);var _r=[{path:"/",name:"index",component:it,meta:{requireAuth:!0}},{path:"/feed",name:"feed",component:At,meta:{requireAuth:!0}},{path:"/search",name:"search",component:de},{path:"/searcharticle/@:author/:permlink",name:"searcharticle",component:Ae},{path:"/collection",name:"collection",component:ye,meta:{requireAuth:!0}},{path:"/autovote",name:"autovote",component:Le},{path:"/collectionarticle/@:author/:permlink",name:"collectionarticle",component:Se},{path:"/feedarticle/@:author/:permlink",name:"feedarticle",component:Gt},{path:"/hotarticle/@:author/:permlink",name:"hotarticle",component:ee},{path:"/hot",name:"hot",component:ie},{path:"/category",name:"category",component:b,meta:{requireAuth:!0}},{path:"/login",name:"login",component:tt},{path:"/article/:permlink",name:"article",component:dt},{path:"/reply",name:"replytoauthor",component:Ke,meta:{requireAuth:!0}},{path:"/comments",name:"comments",component:er,meta:{requireAuth:!0}},{path:"/about",name:"about",component:dr},{path:"/newbie",name:"newbie",component:yr},{path:"/replydetail/@:parent_author/:parent_permlink/@:author/:permlink",name:"replydetail",component:Ge},{path:"/commentdetail/@:parent_author/:parent_permlink/@:author/:permlink",name:"commentdetail",component:ir},{path:"/post",name:"post",component:yt,meta:{requireAuth:!0}},{path:"/edit/:permlink",name:"edit",component:St,meta:{requireAuth:!0}}],kr=new H["a"]({mode:"history",base:"/",routes:_r}),xr=kr,wr=r("2f62"),$r=r("9c40"),Sr=r.n($r);n["default"].use(wr["a"]);var jr=new wr["a"].Store({state:{username:Sr.a.get("username"),password:Sr.a.get("password"),posts:[],db:{},feed:[],hot:[],collections:[],searchPosts:[],repliestoauthor:[]},mutations:{saveUser:function(t,e){t.username=e.username,t.password=e.password,Sr.a.set("username",e.username,"30d"),Sr.a.set("password",e.password,"30d")},savePosts:function(t,e){t.posts=e},saveRepliesToAuthor:function(t,e){t.repliestoauthor=e},saveFeed:function(t,e){t.feed=e},saveHot:function(t,e){t.hot=e},saveCollections:function(t,e){t.collections=e},saveSearchPosts:function(t,e){t.searchPosts=e},saveDB:function(t,e){t.db=e},clearUser:function(t){t.username=null,t.password=null,Sr.a.remove("username"),Sr.a.remove("password")}}}),Or=r("6f38"),Cr=(r("d52a"),r("edc99"),r("f64c")),Fr=r.n(Cr),Rr=r("9584"),Ar=r.n(Rr),Pr=(r("9bad"),r("4fce")),Tr=r.n(Pr),Dr=function(){function t(t,e){for(var r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}return t(5,"0123456789abcdefghijklmnopqrstuvwxyz")},Ir=r("a352"),Er=function(){var t,e,r=this.$store.state.username,n=this.$store.state.username,a=this.$store.state.username+"collection",s=this.$store.state.username+"reply",o=this.$store.state.username+"comments",i=this.$store.state.username+"replytoauthor",l=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;return l||alert("你的浏览器不支持IndexedDB"),new Promise((function(c){e=l.open(r,3),e.onupgradeneeded=function(e){if(t=e.target.result,!t.objectStoreNames.contains(n)){var r=t.createObjectStore(n,{keyPath:"id",autoIncrement:!0});r.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(a)){var l=t.createObjectStore(a,{keyPath:"id",autoIncrement:!0});l.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(s)){var c=t.createObjectStore(s,{keyPath:"id",autoIncrement:!0});c.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(o)){var u=t.createObjectStore(o,{keyPath:"id",autoIncrement:!0});u.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(i))t.createObjectStore(i,{keyPath:"id",autoIncrement:!0})},e.onsuccess=function(e){t=e.target.result,console.log(666,"db版本号",t.version),t.onerror=function(t){alert("Database error:"+t.target.errorCode),console.dir(t.target)},c(t)},e.onerror=function(t){console.log(t,"数据库打开错误")}}))},Lr=function(t){var e=this.$store.state.username,r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Br=function(t){var e=this.$store.state.username+"reply",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Nr=function(t){var e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Jr=function(t){var e=this.$store.state.username;console.log(122,"点赞名单",t);var r=this.$store.state.password,n=this;this.steem.api.streamTransactions("head",(function(a,s){a&&alert("网络有问题！请更换API节点!");var o=s.operations[0][0],i=s.operations[0][1];t.forEach((function(t){if("comment"==o&i.author==t.author&""==i.parent_author){var a=i.permlink,s=t.weight,l=function(){n.steem.broadcast.vote(r,e,t.author,a,100*s,(function(e,r){console.log(688,"点赞完成！",t.author,i.title)}))};setTimeout(l,3e5)}}))}))},qr=function(t){var e=this.$store.state.username+"replytoauthor",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},Hr=function(t,e,r,n,a,s,o,i){this.steem.broadcast.comment(t,e,r,n,a,s,o,i,(function(t,e){console.log(123456,t,e),t&&alert("错误！未能同步到Steem区块链上！可能因为你的RC不足，或是网络不通！\n"+t)}))};n["default"].use(Or["a"]),n["default"].use(Ar.a),Fr.a.api.setOptions({url:"https://anyx.io"}),n["default"].prototype.steem=Fr.a;var Kr=Tr()({host:"steemjiang.com",port:"9000",protocol:"http"});n["default"].prototype.ipfs=Kr,n["default"].prototype.getstr=Dr,n["default"].prototype.imgAdd=Ir["a"],n["default"].prototype.initDatabase=Er,n["default"].prototype.getAllPosts=Lr,n["default"].prototype.getAllReplies=Br,n["default"].prototype.getCollections=Nr,n["default"].prototype.getDataAndVote=Jr,n["default"].prototype.getRepliesToAuthor=qr,n["default"].prototype.postToSteem=Hr,n["default"].config.productionTip=!1,new n["default"]({router:xr,store:jr,render:function(t){return t(q)}}).$mount("#app"),xr.beforeEach((function(t,e,r){t.meta.requireAuth?jr.state.username?r():r({name:"login"}):r()}))},6:function(t,e){},6320:function(t,e,r){},"660e":function(t,e,r){"use strict";var n=r("afba"),a=r.n(n);a.a},6868:function(t,e,r){},"6da8":function(t,e,r){"use strict";var n=r("de0a"),a=r.n(n);a.a},7:function(t,e){},7560:function(t,e,r){"use strict";var n=r("3e8f"),a=r.n(n);a.a},"7f16":function(t,e,r){"use strict";var n=r("e22e"),a=r.n(n);a.a},8:function(t,e){},"812d":function(t,e,r){},"838d":function(t,e,r){"use strict";var n=r("8738"),a=r.n(n);a.a},"838e":function(t,e,r){"use strict";var n=r("53ab"),a=r.n(n);a.a},"83cf":function(t,e,r){"use strict";var n=r("b710"),a=r.n(n);a.a},"85ec":function(t,e,r){},"865e":function(t,e,r){},"86c7":function(t,e,r){},8738:function(t,e,r){},"887c":function(t,e,r){"use strict";var n=r("059c"),a=r.n(n);a.a},9:function(t,e){},"914a":function(t,e,r){"use strict";var n=r("0690"),a=r.n(n);a.a},"987c":function(t,e,r){},a039:function(t,e,r){},a0da:function(t,e,r){"use strict";var n=r("2b98"),a=r.n(n);a.a},a352:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return n}));r("d3b7");var n=function(e,r){var n="https://www.steemjiang.com:8081/ipfs/",a=this,s=function(e){return new Promise((function(r,n){var s=t.from(e.result);a.ipfs.add(s).then((function(t){r(t[0].hash)})).catch((function(t){console.error(t),n(t)}))}))},o=new FileReader;o.readAsArrayBuffer(r),o.onloadend=function(t){s(o).then((function(t){a.$refs.md.$img2Url(e,n+t)}))}}}).call(this,r("b639").Buffer)},a4c8:function(t,e,r){"use strict";var n=r("d935"),a=r.n(n);a.a},afba:function(t,e,r){},afc0:function(t,e,r){"use strict";var n=r("812d"),a=r.n(n);a.a},b710:function(t,e,r){},bd92:function(t,e,r){},c073:function(t,e,r){"use strict";var n=r("26a9"),a=r.n(n);a.a},d7a1:function(t,e,r){t.exports=r.p+"img/logo.b6590778.svg"},d935:function(t,e,r){},de0a:function(t,e,r){},e1b2:function(t,e,r){"use strict";var n=r("bd92"),a=r.n(n);a.a},e22e:function(t,e,r){},ea24:function(t,e,r){"use strict";var n=r("6320"),a=r.n(n);a.a},eb00:function(t,e,r){"use strict";var n=r("a039"),a=r.n(n);a.a},ef0f:function(t,e,r){},f70e:function(t,e,r){},f8f0:function(t,e,r){"use strict";var n=r("fbf2"),a=r.n(n);a.a},fbf2:function(t,e,r){},fc44:function(t,e,r){"use strict";var n=r("1b5e"),a=r.n(n);a.a},fcc0:function(t,e,r){},feb9:function(t,e,r){"use strict";var n=r("3d74"),a=r.n(n);a.a}});
//# sourceMappingURL=app.554a4d15.js.map